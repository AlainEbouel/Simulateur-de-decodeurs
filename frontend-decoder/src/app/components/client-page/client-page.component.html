<div style="text-align: center; margin-top: 20px;">
  <h1 style="color: #1976d2;">ğŸ“º Espace Client â€“ DÃ©codeurs</h1>
  <h2 style="color: #4ce14c;"><span style="color: #15dc1f;">ğŸ‘¤</span> Bienvenue, {{ clientName }}</h2>

  <button mat-raised-button color="warn" (click)="logout()" style="position: absolute; top: 20px; right: 20px;">
    DÃ©connexion
  </button>

  <div *ngIf="decoders.length === 0" style="margin-top: 40px; font-size: 18px; color: #bd1313;">
    Aucun dÃ©codeur assignÃ© pour ce compte.
  </div>

  <div style="display: flex; flex-wrap: wrap; justify-content: center; margin-top: 30px;">
    <mat-card *ngFor="let decoder of decoders" style="width: 350px; margin: 15px; background: #e3f2fd;"
              [ngStyle]="{
    backgroundColor: decoder.status?.state === 'active' ? '#e8f5e9' : '#fce4ec',
    border: '2px solid',
    borderColor: decoder.status?.state === 'active' ? '#66bb6a' : '#e57373'
  }"
              style="width: 350px; margin: 15px;"
    >
      <mat-card-header>
        <mat-card-title>DÃ©codeur #{{ decoder.id }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p><strong>IP</strong> : {{ decoder.ipAddress }}</p>
        <p><strong>Ã‰tat</strong> : {{ decoder.status?.state || '...' }}</p>
        <p><strong>Dernier redÃ©marrage</strong> : {{ decoder.status?.lastRestart }}</p>
        <p><strong>DerniÃ¨re rÃ©initialisation</strong> : {{ decoder.status?.lastReinit }}</p>

        <p><strong>ChaÃ®nes :</strong></p>
        <ul>
          <li *ngFor="let ch of decoder.channels">
            ğŸ“º {{ ch.name }}
            <button mat-button color="warn" (click)="removeChannel(decoder.id, ch.id)">Retirer</button>
          </li>
        </ul>

        <div style="display: flex; align-items: center; margin-top: 8px;">
          <mat-form-field appearance="fill" style="flex: 1; margin: 0;">
            <mat-label>SÃ©lectionner une chaÃ®ne</mat-label>
            <mat-select [(ngModel)]="selectedChannelId[decoder.id]">
              <mat-option *ngFor="let channel of allChannels" [value]="channel.id">
                {{ channel.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>


        </div>
        <button mat-raised-button color="primary" style="margin-bottom: 41px; margin-top: 1px; " (click)="addChannel(decoder.id)">
          Ajouter la chaÃ®ne au dÃ©codeur
        </button>

        <div style="margin-top: 10px;">
          <button mat-stroked-button color="accent" (click)="reboot(decoder.id)">ğŸ” RedÃ©marrer</button>
          <button mat-stroked-button color="warn" (click)="shutdown(decoder.id)">ğŸ›‘ Ã‰teindre</button>
          <button mat-stroked-button color="accent" (click)="reinit(decoder.id)">ğŸ”§ RÃ©initialiser</button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
